<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean name="createSafeMessageSubscriber"
          class="com.youzan.trade.common.nsq.NSQSubConnectorBuilder" init-method="buildAndRun">
        <property name="nsqHost" value="${nsq.host}"/>
        <property name="nsqPort" value="${nsq.port}"/>
        <property name="nsqTopic" value="${nsq.topic.create}"/>
        <property name="nsqChannel" value="${nsq.channel.create}"/>
        <property name="processor" ref="safeProcessorImpl"/>
    </bean>


    <bean name="updateSafeMessageSubscriber"
          class="com.youzan.trade.common.nsq.NSQSubConnectorBuilder" init-method="buildAndRun">
        <property name="nsqHost" value="${nsq.host}"/>
        <property name="nsqPort" value="${nsq.port}"/>
        <property name="nsqTopic" value="${nsq.topic.update}"/>
        <property name="nsqChannel" value="${nsq.channel.update}"/>
        <property name="processor" ref="safeProcessorImpl"/>
    </bean>

    <!--监听维权记录，以便中断/恢复自动完成倒计时-->
    <!-- service实际行为是区分维权状态处于哪种状态、再判断是中断还是恢复操作 -->
    <bean name="dispatchingOrderTaskOnSafeSubscriber"
          class="com.youzan.trade.common.nsq.NSQSubConnectorBuilder" init-method="buildAndRun">
        <property name="nsqHost" value="${nsq.host}"/>
        <property name="nsqPort" value="${nsq.port}"/>
        <property name="nsqTopic" value="${nsq.topic.update}"/>
        <property name="nsqChannel" value="${nsq.channel.update}"/>
        <property name="processor" ref="dispatchingOrderTaskOnSafeProcessorImpl"/>
    </bean>

</beans>
